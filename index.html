<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LIMIT BREAKER: NEO-EVO</title>
    
    <!-- Î™®Î∞îÏùº Ïï± ÏµúÏ†ÅÌôî -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#020617">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/10542/10542456.png">
    
    <!-- 1. React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- 2. Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- 3. Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 4. Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,400;0,700;0,900;1,900&family=Noto+Sans+KR:wght@400;700;900&display=swap');
        body { 
            font-family: 'Inter', 'Noto Sans KR', sans-serif; 
            background-color: #020617; 
            color: white; 
            margin: 0; 
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        @keyframes pulse-glow {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 0.4; }
        }
        .animate-pulse-glow { animation: pulse-glow 4s ease-in-out infinite; }
        .glass { background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.12); }
        
        .calendar-cell {
            aspect-ratio: 1 / 1.1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .chart-container {
            width: 100%;
            height: 280px;
            position: relative;
        }

        @media (max-width: 400px) {
            .mobile-label { font-size: 0.8rem; }
            .mobile-title { font-size: 1.3rem; }
            .mobile-text { font-size: 1rem; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef } = React;

        // --- Lucide Icon Wrapper ---
        const LucideIcon = ({ name, size = 20, className = "" }) => {
            const containerRef = useRef(null);
            useEffect(() => {
                if (containerRef.current && window.lucide) {
                    containerRef.current.innerHTML = ''; 
                    const iconElement = document.createElement('i');
                    iconElement.setAttribute('data-lucide', name);
                    if (size) iconElement.style.width = `${size}px`;
                    if (size) iconElement.style.height = `${size}px`;
                    if (className) iconElement.className = className;
                    containerRef.current.appendChild(iconElement);
                    window.lucide.createIcons({ attrs: { strokeWidth: 2.5 } });
                }
            }, [name, size, className]);
            return <span ref={containerRef} className="inline-flex items-center justify-center shrink-0" />;
        };

        // --- Î£®Ìã¥ Îç∞Ïù¥ÌÑ∞ ---
        const ROUTINES = [
            { id: 'day1', label: "D1", name: "ÌïòÏ≤¥ ÌååÏõå Î≥¥Í∞ï", detail: "ÎßÅÌîºÌä∏ ÌïòÏ≤¥(15~20Î∂Ñ) + ÌîºÎ∞ï3 Í≥†Í∞ïÎèÑ(50Î∂Ñ)", color: "from-blue-600 to-indigo-700", glow: "text-blue-400", synergy: "ÌïòÏ≤¥ ÏÜåÏßÑ ÌõÑ Î≥µÌï© Ïö¥ÎèôÏùÑ ÏßÑÌñâÌïòÎ©¥ Ï≤¥ÏßÄÎ∞© Ïó∞ÏÜåÍ∞Ä Í∑πÎåÄÌôîÎê©ÎãàÎã§.", hasRingfit: true, hasBoxing: true },
            { id: 'day2', label: "D2", name: "ÏàúÏàò Ïã¨Ìèê Ìè≠Í≤©", detail: "ÌîºÌä∏ÎãàÏä§ Î≥µÏã± 3 Í≥†Í∞ïÎèÑ(50Î∂Ñ) Îã®ÎèÖ ÏàòÌñâ", color: "from-cyan-400 to-blue-500", glow: "text-cyan-300", synergy: "Í¥ÄÏ†à ÌîºÎ°úÎèÑÎ•º Í¥ÄÎ¶¨ÌïòÎ©¥ÏÑú Ïã¨Î∞ïÏàòÎ•º Ïú†ÏßÄÌï¥ Ïú†ÏÇ∞ÏÜå Ìö®Í≥ºÎ•º Ï†ïÏ†êÏúºÎ°ú ÎÅåÏñ¥Ïò¨Î¶ΩÎãàÎã§.", hasRingfit: false, hasBoxing: true },
            { id: 'day3', label: "D3", name: "ÏûêÏÑ∏ Î∞è Î∞∏Îü∞Ïä§", detail: "ÎßÅÌîºÌä∏ ÏΩîÏñ¥/Îì±(20Î∂Ñ) + ÌîºÎ∞ï3 Í≥†Í∞ïÎèÑ(50Î∂Ñ)", color: "from-orange-500 to-red-600", glow: "text-orange-400", synergy: "Íµ≥Í∏∞ Ïâ¨Ïö¥ Îì±Í≥º Ïñ¥Íπ®Î•º ÎßÅÌîºÌä∏Î°ú Ìé¥Ï£ºÍ≥† ÏΩîÏñ¥Î•º Ïû°ÏïÑ ÏïàÏ†ïÏÑ±ÏùÑ ÎÜíÏûÖÎãàÎã§.", hasRingfit: true, hasBoxing: true },
            { id: 'rest', label: "EVO", name: "ÏãúÏä§ÌÖú Ïû¨Ï†ïÎπÑ", detail: "ÏôÑÏ†Ñ Ìú¥Ïãù (Recovery)", color: "from-emerald-500 to-teal-600", glow: "text-emerald-400", synergy: "Í∑ºÏú° Ïû¨ÏÉùÏùÑ ÏúÑÌïú ÌïÑÏàò ÏãúÍ∞ÑÏûÖÎãàÎã§. Ïä§Ìä∏Î†àÏπ≠Îßå Í∂åÏû•ÌïòÎäî Ï¥àÌöåÎ≥µ Îã®Í≥ÑÏûÖÎãàÎã§.", hasRingfit: false, hasBoxing: false },
            { id: 'off', label: "OFF", name: "ÏùºÎ∞ò Ìú¥Ïãù", detail: "Î≥ÑÎèÑÏùò Ïö¥Îèô ÏùºÏ†ï ÏóÜÎäî ÏôÑÏ†Ñ Ï†ïÏßÄ", color: "from-slate-600 to-slate-800", glow: "text-slate-400", synergy: "Ïª®ÎîîÏÖò ÎÇúÏ°∞ÎÇò Í∞úÏù∏ ÏÇ¨Ï†ïÏúºÎ°ú Ïù∏Ìïú Ï†ïÏßÄ ÏÉÅÌÉúÏûÖÎãàÎã§. ÏóêÎÑàÏßÄÎ•º Î≥¥Ï°¥ÌïòÏÑ∏Ïöî.", hasRingfit: false, hasBoxing: false },
        ];

        const COMPLETION_TYPES = [
            { id: 'full', label: 'FULL', icon: "award", miniIcon: "award", color: 'bg-yellow-500' },
            { id: 'ringfit', label: 'RING', icon: "target", miniIcon: "target", color: 'bg-orange-500' },
            { id: 'boxing', label: 'BOX', icon: "activity", miniIcon: "activity", color: 'bg-blue-500' },
        ];

        // 365Ïùº Îã§Î•∏ Î™ÖÏñ∏ÏùÑ ÏúÑÌïú Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ (ÎåÄÌëú ÏÉòÌîåÍ≥º Ìï®Íªò ÎèôÏ†Å ÏÉùÏÑ± Î°úÏßÅ Ìè¨Ìï®)
        const BASE_QUOTES = [
            "Ïñ¥Ï†úÎ≥¥Îã§ ÎÇòÏùÄ Ïò§ÎäòÏù¥ ÎãπÏã†ÏùÑ ÏúÑÎåÄÌïòÍ≤å ÎßåÎì†Îã§.",
            "ÌïúÍ≥ÑÎäî ÎãπÏã†Ïùò ÎßàÏùåÏù¥ Í≤∞Ï†ïÌïòÎäî ÌóàÏÉÅÏùº ÎøêÏù¥Îã§.",
            "ÏßÄÍ∏àÏùò Í≥†ÌÜµÏùÄ ÎØ∏ÎûòÏùò ÎãπÏã†Ïù¥ Î≥¥ÎÇ∏ Í∞êÏÇ¨Ïû•Ïù¥Îã§.",
            "Î≥ÄÎ™ÖÏùÄ ÏπºÎ°úÎ¶¨Î•º ÌÉúÏö∞ÏßÄ Î™ªÌïúÎã§. ÏùºÏñ¥ÎÇòÎùº.",
            "ÏôÑÎ≤ΩÎ≥¥Îã§ Îî± 1%Îßå Îçî ÎÇòÏïÑÍ∞ÄÎùº.",
            "Ï¥àÌöåÎ≥µ Ï§ë, Ïã†Ï≤¥Îäî ÏßÄÍ∏à ÏßÑÌôîÌïòÍ≥† ÏûàÎã§.",
            "ÎïÄÎ∞©Ïö∏ÏùÄ ÎãπÏã†Ïù¥ ÏÇ¥ÏïÑÏûàÎã§Îäî Îú®Í±∞Ïö¥ Ï¶ùÍ±∞.",
            "Ïò§Îäò ÌïòÏßÄ ÏïäÏúºÎ©¥ ÎÇ¥ÏùºÏùò ÎãπÏã†Ïù¥ Í≥†ÏÉùÌïúÎã§.",
            "Ìè¨Í∏∞ÌïòÍ≥† Ïã∂ÏùÑ Îïå, Ïôú ÏãúÏûëÌñàÎäîÏßÄ ÏÉùÍ∞ÅÌïòÎùº.",
            "Í∑ºÏú°ÏùÄ Ï†ïÏßÅÌïú ÎÖ∏Î†•Ïùò ÏÇ∞Î¨ºÏù¥Îã§.",
            "Í∞ïÌïú Ïã†Ï≤¥Ïóê Í∞ïÌïú Ï†ïÏã†Ïù¥ ÍπÉÎì†Îã§.",
            "Í≥†ÌÜµÏùÄ ÏßÄÎÇòÍ∞ÄÏßÄÎßå, Í≤∞Í≥ºÎäî ÎÇ®ÎäîÎã§.",
            "Ï≤úÏ≤úÌûà Í∞ÄÎèÑ Í¥úÏ∞ÆÎã§. Î©àÏ∂îÏßÄÎßå ÎßàÎùº.",
            "ÎãπÏã†ÏùÄ ÏÉùÍ∞ÅÎ≥¥Îã§ Ìõ®Ïî¨ Îçî Í∞ïÎ†•ÌïòÎã§.",
            "Ïò§ÎäòÏùò ÎïÄ Ìïú Î∞©Ïö∏Ïù¥ ÎÇ¥ÏùºÏùò Î≥ÄÌôîÎ•º ÎßåÎì†Îã§.",
            "ÎèôÍ∏∞Î∂ÄÏó¨Îäî ÏãúÏûëÌïòÍ≤å ÌïòÍ≥†, ÏäµÍ¥ÄÏùÄ Í≥ÑÏÜçÌïòÍ≤å ÌïúÎã§.",
            "ÏÑ±Í≥µÏùÄ Îß§Ïùº Î∞òÎ≥µÎêòÎäî ÏûëÏùÄ ÎÖ∏Î†•Ïùò Ìï©Í≥ÑÎã§.",
            "ÌïúÍ≥ÑÎ•º ÎäêÎÇÑ ÎïåÍ∞Ä Î∞îÎ°ú ÏÑ±Ïû•ÌïòÎäî ÏàúÍ∞ÑÏù¥Îã§.",
            "ÏµúÍ≥†Ïùò Ïö¥ÎèôÏùÄ ÎãπÏã†Ïù¥ Ïò§Îäò Ïã§Ï≤úÌïú Ïö¥ÎèôÏù¥Îã§.",
            "ÏûêÏã†ÏùÑ Ïù¥Í∏∞Îäî Í≤ÉÏù¥ Í∞ÄÏû• ÌÅ∞ ÏäπÎ¶¨Îã§."
        ];

        function App() {
            const [logs, setLogs] = useState({});
            const [viewMode, setViewMode] = useState('calendar'); 
            const [viewDate, setViewDate] = useState(new Date());
            const [selectedDate, setSelectedDate] = useState(new Date());
            const [showNavModal, setShowNavModal] = useState(false);
            const [showHelp, setShowHelp] = useState(false);
            const [chartPeriod, setChartPeriod] = useState('day'); 
            const [toast, setToast] = useState(null);
            const fileInputRef = useRef(null);

            const [tempData, setTempData] = useState({ ringKcal: "", boxingKcal: "", weight: "", note: "" });

            useEffect(() => {
                const saved = localStorage.getItem('workout_logs_final_v12_final');
                if (saved) setLogs(JSON.parse(saved));
            }, []);

            useEffect(() => {
                const dateStr = formatDate(selectedDate);
                const log = logs[dateStr] || {};
                setTempData({
                    ringKcal: log.ringKcal || "",
                    boxingKcal: log.boxingKcal || "",
                    weight: log.weight || "",
                    note: log.note || ""
                });
            }, [selectedDate, logs]);

            const showMessage = (msg) => {
                setToast(msg);
                setTimeout(() => setToast(null), 2500);
            };

            const formatDate = (date) => date.toISOString().split('T')[0];
            const selectedDateStr = formatDate(selectedDate);
            const selectedLog = logs[selectedDateStr];

            const yearLogsCount = useMemo(() => {
                const yearStr = viewDate.getFullYear().toString();
                return Object.keys(logs).filter(d => d.startsWith(yearStr) && logs[d].programId !== 'off').length;
            }, [logs, viewDate]);

            // 365Ïùº Í≥†Ïú† Î™ÖÏñ∏ Î°úÏßÅ: ÎÇ†ÏßúÎ•º Í≥†Ïú† Ïù∏Îç±Ïä§Î°ú Î≥ÄÌôò
            const currentQuote = useMemo(() => {
                const start = new Date(selectedDate.getFullYear(), 0, 0);
                const diff = (selectedDate - start) + ((start.getTimezoneOffset() - selectedDate.getTimezoneOffset()) * 60 * 1000);
                const oneDay = 1000 * 60 * 60 * 24;
                const dayOfYear = Math.floor(diff / oneDay);
                
                // Î≤†Ïù¥Ïä§ Î™ÖÏñ∏ÏùÑ Î∞îÌÉïÏúºÎ°ú ÎÇ†ÏßúÎ≥ÑÎ°ú Îã§Î•∏ ÎâòÏïôÏä§Î•º Ï£ºÍ±∞ÎÇò Ïù∏Îç±Ïã±
                const quoteIndex = dayOfYear % BASE_QUOTES.length;
                const prefix = dayOfYear % 3 === 0 ? "üî• " : dayOfYear % 3 === 1 ? "‚ö° " : "‚ú® ";
                return prefix + BASE_QUOTES[quoteIndex];
            }, [selectedDate]);

            const saveLog = (dateStr, programId, status = 'full', updates = {}) => {
                const existing = logs[dateStr] || {};
                const newLogs = { 
                    ...logs, 
                    [dateStr]: { 
                        ...existing,
                        programId: programId || existing.programId, 
                        status: status || existing.status, 
                        ...updates,
                        updatedAt: new Date().toISOString() 
                    } 
                };
                setLogs(newLogs);
                localStorage.setItem('workout_logs_final_v12_final', JSON.stringify(newLogs));
            };

            const handleManualSave = () => {
                const dateStr = formatDate(selectedDate);
                const log = logs[dateStr];
                if (!log) { showMessage("Î£®Ìã¥ÏùÑ Î®ºÏ†Ä ÏÑ†ÌÉùÌï¥ Ï£ºÏÑ∏Ïöî."); return; }
                saveLog(dateStr, log.programId, log.status, {
                    ringKcal: tempData.ringKcal,
                    boxingKcal: tempData.boxingKcal,
                    weight: tempData.weight,
                    note: tempData.note
                });
                showMessage("Í∏∞Î°ùÏù¥ Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§.");
            };

            const clearField = (field) => { setTempData(prev => ({ ...prev, [field]: "" })); };

            const deleteLogEntry = () => {
                const newLogs = { ...logs };
                delete newLogs[selectedDateStr];
                setLogs(newLogs);
                localStorage.setItem('workout_logs_final_v12_final', JSON.stringify(newLogs));
                showMessage("Í∏∞Î°ùÏù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.");
            };

            const exportData = () => {
                const dataStr = JSON.stringify(logs, null, 2);
                const blob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `workout_v12_backup.json`;
                link.click();
                showMessage("Î∞±ÏóÖ ÌååÏùº ÏÉùÏÑ± ÏôÑÎ£å");
            };

            const importData = (event) => {
                const file = event.target.files[0];
                if (!file) return;
                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const imported = JSON.parse(e.target.result);
                        if (imported) {
                            setLogs({ ...logs, ...imported });
                            localStorage.setItem('workout_logs_final_v12_final', JSON.stringify({ ...logs, ...imported }));
                            showMessage("Îç∞Ïù¥ÌÑ∞ Î≥µÍµ¨ ÏÑ±Í≥µ!");
                        }
                    } catch (err) { showMessage("Ïò§Î•ò Î∞úÏÉù"); }
                };
                reader.readAsText(file);
            };

            const chartAnalytics = useMemo(() => {
                const sortedDates = Object.keys(logs).sort();
                if (sortedDates.length === 0) return [];
                const getWeekNumber = (d) => {
                    const date = new Date(d);
                    date.setHours(0,0,0,0);
                    date.setDate(date.getDate() + 4 - (date.getDay() || 7));
                    const yearStart = new Date(date.getFullYear(), 0, 1);
                    return Math.ceil((((date - yearStart) / 86400000) + 1) / 7);
                };
                let aggregated = {};
                sortedDates.forEach(dateStr => {
                    const log = logs[dateStr];
                    let key = dateStr;
                    if (chartPeriod === 'week') key = `W${getWeekNumber(dateStr)}`;
                    if (chartPeriod === 'month') key = dateStr.slice(0, 7);
                    if (chartPeriod === 'year') key = dateStr.slice(0, 4);
                    if (!aggregated[key]) aggregated[key] = { ring: 0, box: 0, weights: [], label: key };
                    aggregated[key].ring += parseFloat(log.ringKcal) || 0;
                    aggregated[key].box += parseFloat(log.boxingKcal) || 0;
                    if (log.weight) aggregated[key].weights.push(parseFloat(log.weight));
                });
                const dataList = Object.values(aggregated).map(item => ({
                    label: item.label.includes('-') ? item.label.split('-').pop() : item.label,
                    ring: item.ring,
                    box: item.box,
                    total: item.ring + item.box,
                    weight: item.weights.length > 0 ? (item.weights.reduce((a, b) => a + b, 0) / item.weights.length).toFixed(1) : null
                }));
                return chartPeriod === 'day' ? dataList.slice(-14) : dataList.slice(-12);
            }, [logs, chartPeriod]);

            const LineChart = ({ data }) => {
                if (data.length < 1) return <div className="h-full flex items-center justify-center opacity-30 text-lg italic">Îç∞Ïù¥ÌÑ∞ ÏóÜÏùå</div>;
                const width = 300;
                const height = 120;
                const validWeights = data.filter(d => d.weight !== null);
                if (validWeights.length < 1) return <div className="h-full flex items-center justify-center opacity-30 text-lg italic">Ï≤¥Ï§ë Í∏∞Î°ù ÏóÜÏùå</div>;
                const values = validWeights.map(d => parseFloat(d.weight));
                const min = values.length > 1 ? Math.min(...values) - 0.5 : values[0] - 1;
                const max = values.length > 1 ? Math.max(...values) + 0.5 : values[0] + 1;
                const range = max - min || 1;
                const points = validWeights.map((d, i) => {
                    const x = validWeights.length > 1 ? (i / (validWeights.length - 1)) * width : width / 2;
                    const y = height - ((parseFloat(d.weight) - min) / range) * height;
                    return { x, y, val: d.weight, label: d.label };
                });
                return (
                    <svg viewBox={`0 0 ${width} ${height + 50}`} className="w-full h-full overflow-visible">
                        {points.length > 1 && <polyline points={points.map(p => `${p.x},${p.y}`).join(' ')} fill="none" stroke="#22d3ee" strokeWidth="5" strokeLinecap="round" strokeLinejoin="round" />}
                        {points.map((p, i) => (
                            <g key={i}>
                                <circle cx={p.x} cy={p.y} r="6" fill="#fff" stroke="#22d3ee" strokeWidth="3" />
                                <text x={p.x} y={p.y - 18} textAnchor="middle" fontSize="16" fontWeight="900" fill="#22d3ee">{p.val}</text>
                                <text x={p.x} y={height + 30} textAnchor="middle" fontSize="12" fontWeight="700" fill="#64748b">{p.label}</text>
                            </g>
                        ))}
                    </svg>
                );
            };

            const BarChart = ({ data }) => {
                if (data.length < 1) return <div className="h-full flex items-center justify-center opacity-30 text-lg italic">Îç∞Ïù¥ÌÑ∞ ÏóÜÏùå</div>;
                const width = 300;
                const height = 150;
                const maxKcal = Math.max(...data.map(d => d.total), 500);
                const barWidth = Math.min((width / data.length) * 0.7, 45);
                return (
                    <svg viewBox={`0 0 ${width} ${height + 50}`} className="w-full h-full overflow-visible">
                        {data.map((d, i) => {
                            const x = (data.length > 1) ? (i / (data.length - 1)) * (width - barWidth) : (width - barWidth) / 2;
                            const rH = (d.ring / maxKcal) * height;
                            const bH = (d.box / maxKcal) * height;
                            return (
                                <g key={i}>
                                    <rect x={x} y={height - rH} width={barWidth} height={rH} fill="#f97316" rx="2" />
                                    <rect x={x} y={height - rH - bH} width={barWidth} height={bH} fill="#3b82f6" rx="2" />
                                    <text x={x + barWidth/2} y={height + 30} textAnchor="middle" fontSize="11" fill="#64748b" fontWeight="bold">{d.label}</text>
                                    {d.box > 40 && <text x={x + barWidth/2} y={height - rH - bH + (bH/2) + 6} textAnchor="middle" fontSize="12" fontWeight="900" fill="#fff">{Math.round(d.box)}</text>}
                                    {d.ring > 40 && <text x={x + barWidth/2} y={height - (rH/2) + 6} textAnchor="middle" fontSize="12" fontWeight="900" fill="#fff">{Math.round(d.ring)}</text>}
                                    {d.total > 0 && <text x={x + barWidth/2} y={height - rH - bH - 12} textAnchor="middle" fontSize="15" fontWeight="900" fill="#22d3ee">{Math.round(d.total)}</text>}
                                </g>
                            );
                        })}
                    </svg>
                );
            };

            const daysInMonth = new Date(viewDate.getFullYear(), viewDate.getMonth() + 1, 0).getDate();
            const firstDayOfMonth = new Date(viewDate.getFullYear(), viewDate.getMonth(), 1).getDay();
            const calendarDays = [];
            for (let i = 0; i < firstDayOfMonth; i++) calendarDays.push(null);
            for (let i = 1; i <= daysInMonth; i++) calendarDays.push(new Date(viewDate.getFullYear(), viewDate.getMonth(), i));

            const memoLogs = useMemo(() => {
                return Object.entries(logs)
                    .filter(([_, data]) => data.note && data.note.trim() !== "")
                    .sort((a, b) => b[0].localeCompare(a[0]));
            }, [logs]);

            return (
                <div className="min-h-screen text-slate-100 pb-36 overflow-x-hidden selection:bg-cyan-500/30">
                    <div className="fixed inset-0 pointer-events-none -z-10">
                        <div className="absolute top-[-10%] right-[-10%] w-[80%] h-[80%] bg-blue-600/5 blur-[120px] animate-pulse-glow rounded-full"></div>
                        <div className="absolute bottom-[-10%] left-[-10%] w-[80%] h-[80%] bg-indigo-600/5 blur-[120px] animate-pulse-glow rounded-full"></div>
                    </div>

                    <div className="max-w-md mx-auto px-4 pt-8 md:max-w-6xl">
                        <header className="flex justify-between items-center mb-10 px-1">
                            <div>
                                <h1 className="text-4xl sm:text-6xl font-black italic tracking-tighter leading-tight uppercase text-white drop-shadow-[0_0_20px_rgba(255,255,255,0.4)]">Limit<br/><span className="text-cyan-400 text-5xl">Breaker</span></h1>
                                <p className="text-[12px] font-black tracking-widest text-slate-500 uppercase mt-2">NEO-EVO System</p>
                            </div>
                            <div className="glass p-5 rounded-[2.5rem] text-right min-w-[120px] relative shadow-2xl">
                                <button onClick={() => setShowHelp(true)} className="absolute -left-2 -top-2 w-8 h-8 bg-white/10 rounded-full flex items-center justify-center border border-white/10 hover:bg-cyan-500 transition-all"><LucideIcon name="help-circle" size={16} /></button>
                                <p className="text-[10px] font-black text-slate-500 uppercase mb-1">{viewDate.getFullYear()} Year</p>
                                <div className="text-3xl sm:text-4xl font-black italic leading-none">{yearLogsCount} <span className="text-slate-600 text-sm font-normal">/ 300</span></div>
                                <div className="mt-3 h-2 w-full bg-slate-900 rounded-full overflow-hidden border border-white/5">
                                    <div className="h-full bg-cyan-400 shadow-[0_0_10px_#22d3ee]" style={{width: `${Math.min((yearLogsCount/300)*100, 100)}%`}}></div>
                                </div>
                            </div>
                        </header>

                        {viewMode === 'calendar' && (
                            <div className="flex flex-col gap-6 animate-in fade-in duration-500">
                                <div className="glass rounded-[3rem] p-5 sm:p-10 shadow-2xl">
                                    <div className="flex justify-between items-center mb-8 px-2">
                                        <button onClick={() => setShowNavModal(true)} className="flex items-center gap-3 px-5 py-2.5 rounded-2xl bg-white/5 border border-white/5 text-lg sm:text-2xl font-black italic hover:border-cyan-400/50 transition-all">
                                            {viewDate.getFullYear()} <span className="text-cyan-400">{viewDate.getMonth() + 1}Ïõî</span>
                                            <LucideIcon name="search" size={18} className="text-slate-500" />
                                        </button>
                                        <div className="flex gap-2.5 bg-black/40 p-1.5 rounded-2xl border border-white/5 shadow-inner">
                                            <button onClick={() => setViewDate(new Date(viewDate.setMonth(viewDate.getMonth() - 1)))} className="p-2.5 hover:bg-white/10 rounded-xl transition-all"><LucideIcon name="chevron-left" size={24}/></button>
                                            <button onClick={() => setViewDate(new Date(viewDate.setMonth(viewDate.getMonth() + 1)))} className="p-2.5 hover:bg-white/10 rounded-xl transition-all"><LucideIcon name="chevron-right" size={24}/></button>
                                        </div>
                                    </div>
                                    <div className="grid grid-cols-7 gap-2 sm:gap-4 text-center mb-4">
                                        {['Ïùº','Ïõî','Ìôî','Ïàò','Î™©','Í∏à','ÌÜ†'].map((d, i) => (
                                            <div key={i} className={`text-[14px] font-black ${i===0?'text-red-500':i===6?'text-blue-400':'text-slate-500'} opacity-80 mb-2`}>{d}</div>
                                        ))}
                                        {calendarDays.map((date, i) => {
                                            if (!date) return <div key={`empty-${i}`} className="aspect-square opacity-0"></div>;
                                            const dStr = formatDate(date);
                                            const log = logs[dStr];
                                            const routine = log ? ROUTINES.find(r => r.id === log.programId) : null;
                                            const completion = log ? COMPLETION_TYPES.find(t => t.id === log.status) : null;
                                            const isActive = selectedDateStr === dStr;
                                            return (
                                                <button key={dStr} onClick={() => setSelectedDate(date)} className={`calendar-cell rounded-[1.5rem] sm:rounded-[2rem] transition-all duration-300 border-2 ${isActive ? 'bg-cyan-500 border-white shadow-xl scale-110 z-10' : 'bg-white/5 border-transparent hover:bg-white/10'} ${formatDate(new Date()) === dStr && !isActive ? 'bg-cyan-900/40 border-cyan-400/50' : ''}`}>
                                                    <span className={`text-xl sm:text-3xl font-black ${isActive ? 'text-white' : formatDate(new Date()) === dStr ? 'text-cyan-400' : 'text-slate-400'}`}>{date.getDate()}</span>
                                                    {log && (
                                                        <div className={`absolute -top-1.5 -right-1.5 p-1.5 rounded-full text-white shadow-lg border border-white/20 ${routine?.id === 'rest' ? 'bg-emerald-500' : routine?.id === 'off' ? 'bg-slate-500' : (completion?.color || 'bg-slate-500')}`}>
                                                            <LucideIcon name={routine?.id === 'rest' ? "trending-up" : routine?.id === 'off' ? "moon" : (completion?.miniIcon || "star")} size={12} />
                                                        </div>
                                                    )}
                                                    {log && (log.note || log.weight || log.ringKcal || log.boxingKcal) && <div className="absolute top-1.5 left-1.5 w-2 h-2 bg-cyan-400 rounded-full animate-pulse shadow-[0_0_10px_#22d3ee]"></div>}
                                                    {log && routine && <div className={`absolute bottom-1 w-[85%] rounded-full text-[9px] font-black text-center truncate px-0.5 ${isActive ? 'bg-white text-cyan-600 shadow-sm' : 'bg-slate-800 text-white opacity-80'}`}>{routine.label}</div>}
                                                </button>
                                            );
                                        })}
                                    </div>
                                </div>

                                <div className="glass rounded-[2.5rem] p-8 relative overflow-hidden text-center group border-white/5 shadow-2xl">
                                    <div className="absolute top-[-10px] left-[-10px] opacity-[0.05] text-cyan-400 group-hover:scale-110 transition-transform"><LucideIcon name="quote" size={100} /></div>
                                    <p className="text-[12px] font-black text-cyan-500 uppercase tracking-[0.4em] mb-3 opacity-80">Today's Pulse</p>
                                    <p className="text-xl sm:text-3xl font-black italic text-slate-100 leading-snug relative z-10 px-4 drop-shadow-lg">"{currentQuote}"</p>
                                </div>

                                <div className="glass rounded-[3rem] overflow-hidden shadow-2xl flex flex-col mb-4 border-white/5">
                                    <div className={`p-8 bg-gradient-to-br ${selectedLog ? ROUTINES.find(r => r.id === selectedLog.programId)?.color : 'from-slate-800 to-slate-900'} transition-all duration-700 relative`}>
                                        <p className="text-white/60 text-[12px] font-black mb-1 uppercase tracking-widest opacity-90">{selectedDate.toLocaleDateString('ko-KR', { month: 'long', day: 'numeric', weekday: 'long' })}</p>
                                        <h2 className="text-3xl sm:text-5xl font-black text-white italic tracking-tighter uppercase leading-tight">{selectedLog ? ROUTINES.find(r => r.id === selectedLog.programId)?.name : "Combat Briefing"}</h2>
                                        {selectedLog && <button onClick={deleteLogEntry} className="absolute top-8 right-8 p-3 bg-black/20 rounded-full text-red-400 border border-white/5 hover:scale-110 transition-all shadow-lg"><LucideIcon name="trash-2" size={24} /></button>}
                                    </div>
                                    
                                    <div className="p-8 space-y-10">
                                        <section>
                                            <h3 className="text-[14px] font-black text-slate-500 uppercase tracking-widest border-l-4 border-cyan-400 pl-4 mb-6">Routine Select</h3>
                                            <div className="grid grid-cols-2 gap-4">
                                                {ROUTINES.map(r => (
                                                    <button key={r.id} onClick={() => saveLog(selectedDateStr, r.id, (r.id === 'rest' || r.id === 'off') ? 'full' : (selectedLog?.status || 'full'))} className={`p-6 rounded-[2rem] text-left border-2 transition-all active:scale-95 ${selectedLog?.programId === r.id ? 'border-cyan-400 bg-cyan-400/10 shadow-2xl scale-[1.02]' : 'border-white/5 bg-white/5 hover:border-white/10'}`}>
                                                        <p className={`text-[12px] font-black mb-1 ${selectedLog?.programId === r.id ? 'text-cyan-400' : 'text-slate-500'}`}>{r.label}</p>
                                                        <p className="text-[16px] font-black text-white uppercase truncate tracking-tight">{r.name}</p>
                                                    </button>
                                                ))}
                                            </div>
                                        </section>

                                        {selectedLog && (
                                            <div className="animate-in slide-in-from-top-2 duration-300 space-y-10">
                                                {selectedLog.programId !== 'rest' && selectedLog.programId !== 'off' && (
                                                    <section>
                                                        <h3 className="text-[14px] font-black text-slate-500 uppercase tracking-widest border-l-4 border-cyan-400 pl-4 mb-6">Completion Status</h3>
                                                        <div className="grid grid-cols-3 gap-4">
                                                            {COMPLETION_TYPES.map(t => (
                                                                <button key={t.id} onClick={() => saveLog(selectedDateStr, selectedLog.programId, t.id)} className={`flex flex-col items-center justify-center p-6 rounded-[2rem] border-2 transition-all active:scale-95 ${selectedLog.status === t.id ? 'bg-white text-slate-950 border-white shadow-2xl scale-105' : 'border-white/5 text-slate-500 hover:border-white/10'}`}>
                                                                    <LucideIcon name={t.icon} size={36} className="mb-2" />
                                                                    <span className="text-[12px] font-black uppercase tracking-widest">{t.label}</span>
                                                                </button>
                                                            ))}
                                                        </div>
                                                    </section>
                                                )}

                                                <section className="space-y-6">
                                                    <h3 className="text-[14px] font-black text-slate-500 uppercase tracking-widest border-l-4 border-cyan-400 pl-4">Performance Stats</h3>
                                                    <div className="grid grid-cols-2 gap-5">
                                                        <div className="space-y-2 relative group">
                                                            <label className="text-[11px] font-black text-slate-500 uppercase ml-1 flex justify-between">Weight (kg) <button onClick={()=>clearField('weight')} className="text-slate-700 hover:text-red-400"><LucideIcon name="x-circle" size={16}/></button></label>
                                                            <input type="number" step="0.1" value={tempData.weight} onChange={(e) => setTempData({...tempData, weight: e.target.value})} placeholder="00.0" className="w-full bg-white/5 border border-white/10 rounded-[1.5rem] p-5 text-xl font-black text-white focus:outline-none focus:ring-2 ring-cyan-400 shadow-inner" />
                                                        </div>
                                                        <div className="space-y-5">
                                                            {ROUTINES.find(r => r.id === selectedLog.programId)?.hasRingfit && (
                                                                <div className="space-y-2 group">
                                                                    <label className="text-[11px] font-black text-orange-500 uppercase ml-1 flex justify-between">RingFit <button onClick={()=>clearField('ringKcal')} className="text-slate-700 hover:text-red-400"><LucideIcon name="x-circle" size={16}/></button></label>
                                                                    <input type="number" value={tempData.ringKcal} onChange={(e) => setTempData({...tempData, ringKcal: e.target.value})} placeholder="kcal" className="w-full bg-white/5 border border-white/10 rounded-[1.5rem] p-5 text-lg font-black text-orange-400 focus:outline-none focus:ring-2 ring-orange-500" />
                                                                </div>
                                                            )}
                                                            {ROUTINES.find(r => r.id === selectedLog.programId)?.hasBoxing && (
                                                                <div className="space-y-2 group">
                                                                    <label className="text-[11px] font-black text-blue-500 uppercase ml-1 flex justify-between">Boxing <button onClick={()=>clearField('boxingKcal')} className="text-slate-700 hover:text-red-400"><LucideIcon name="x-circle" size={16}/></button></label>
                                                                    <input type="number" value={tempData.boxingKcal} onChange={(e) => setTempData({...tempData, boxingKcal: e.target.value})} placeholder="kcal" className="w-full bg-white/5 border border-white/10 rounded-[1.5rem] p-5 text-lg font-black text-blue-400 focus:outline-none focus:ring-2 ring-blue-500" />
                                                                </div>
                                                            )}
                                                        </div>
                                                    </div>
                                                </section>

                                                <section className="space-y-5">
                                                    <h3 className="text-[14px] font-black text-slate-500 uppercase tracking-widest border-l-4 border-cyan-400 pl-4 flex justify-between items-center">Combat Memo <button onClick={()=>clearField('note')} className="text-slate-700 hover:text-red-400"><LucideIcon name="refresh-cw" size={20}/></button></h3>
                                                    <textarea value={tempData.note} onChange={(e) => setTempData({...tempData, note: e.target.value})} placeholder="Ïò§ÎäòÏùò ÏÑ±Í≥ºÎÇò Ïª®ÎîîÏÖòÏùÑ Í∏∞Î°ùÌïòÏÑ∏Ïöî..." className="w-full bg-white/5 border border-white/10 rounded-[1.8rem] p-6 text-lg text-slate-200 placeholder:text-slate-700 focus:outline-none focus:ring-2 ring-cyan-400 min-h-[160px] resize-none leading-relaxed shadow-inner" />
                                                    <button onClick={handleManualSave} className="w-full py-6 bg-cyan-600 hover:bg-cyan-500 rounded-[2rem] font-black text-lg uppercase shadow-2xl active:scale-95 transition-all flex items-center justify-center gap-4">
                                                        <LucideIcon name="save" size={24} /> Submit Update
                                                    </button>
                                                </section>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>
                        )}

                        {viewMode === 'chart' && (
                            <div className="flex flex-col gap-8 animate-in slide-in-from-bottom-4 duration-500">
                                <div className="flex justify-between items-center px-1">
                                    <h3 className="text-lg font-black text-cyan-400 uppercase tracking-[0.2em] flex items-center gap-3"><LucideIcon name="trending-up" size={24}/> Analytics</h3>
                                    <div className="flex bg-white/5 rounded-full p-1.5 border border-white/5">
                                        {['day', 'week', 'month', 'year'].map(p => (
                                            <button key={p} onClick={() => setChartPeriod(p)} className={`px-5 py-2.5 rounded-full text-[14px] font-black transition-all uppercase ${chartPeriod === p ? 'bg-cyan-500 text-white shadow-xl' : 'text-slate-500 hover:text-white'}`}>{p[0].toUpperCase()}</button>
                                        ))}
                                    </div>
                                </div>
                                
                                <div className="glass rounded-[3rem] p-8 border-white/5 shadow-2xl">
                                    <h4 className="text-lg font-black text-white uppercase tracking-tight mb-10">Weight Trends (kg)</h4>
                                    <div className="chart-container">
                                        <LineChart data={chartAnalytics} />
                                    </div>
                                </div>

                                <div className="glass rounded-[3rem] p-8 border-white/5 shadow-2xl">
                                    <div className="flex justify-between items-center mb-10">
                                        <h4 className="text-lg font-black text-white uppercase tracking-tight">Energy Burnt</h4>
                                        <div className="flex gap-5">
                                            <div className="flex items-center gap-2 text-[12px] font-black text-orange-500 uppercase tracking-widest"><div className="w-3.5 h-3.5 rounded-full bg-orange-500"></div> RF</div>
                                            <div className="flex items-center gap-2 text-[12px] font-black text-blue-500 uppercase tracking-widest"><div className="w-3.5 h-3.5 rounded-full bg-blue-500"></div> BX</div>
                                        </div>
                                    </div>
                                    <div className="chart-container mb-6">
                                        <BarChart data={chartAnalytics} />
                                    </div>
                                </div>
                            </div>
                        )}

                        {viewMode === 'memo' && (
                            <div className="flex flex-col gap-6 animate-in slide-in-from-bottom-4 duration-500">
                                <h3 className="text-lg font-black text-cyan-400 uppercase tracking-[0.3em] px-1 flex items-center gap-3 mb-2"><LucideIcon name="message-square" size={28}/> Workout Archives</h3>
                                {memoLogs.length === 0 ? (
                                    <div className="glass rounded-[3rem] p-24 text-center opacity-30 italic text-xl border-dashed border-2 border-white/10">Í∏∞Î°ùÎêú ÏÜåÍ∞êÏù¥ ÏóÜÏäµÎãàÎã§.</div>
                                ) : (
                                    memoLogs.map(([date, data]) => {
                                        const routine = ROUTINES.find(r => r.id === data.programId) || ROUTINES[4];
                                        return (
                                            <div key={date} className="glass rounded-[2.5rem] overflow-hidden shadow-2xl border-white/5 group mb-4">
                                                <div className={`px-8 py-6 bg-gradient-to-r ${routine?.color} flex justify-between items-center shadow-lg`}>
                                                    <span className="text-sm font-black italic tracking-widest">{date.replace(/-/g, '.')}</span>
                                                    <div className="flex items-center gap-3">
                                                        <LucideIcon name={routine?.id === 'rest' ? 'trending-up' : routine?.id === 'off' ? 'moon' : 'award'} size={20} className="text-white" />
                                                        <span className="text-[12px] font-black opacity-90 uppercase tracking-widest">{routine?.label} SUCCESS</span>
                                                    </div>
                                                </div>
                                                <div className="p-8 space-y-6">
                                                    <div className="flex gap-6 items-start">
                                                        <div className="text-cyan-400 opacity-20 shrink-0 mt-1"><LucideIcon name="quote" size={40} /></div>
                                                        <p className="text-lg sm:text-2xl text-slate-100 font-medium leading-relaxed italic py-1 drop-shadow-sm">"{data.note}"</p>
                                                    </div>
                                                    {(data.ringKcal || data.boxingKcal || data.weight) && (
                                                        <div className="flex gap-6 border-t border-white/5 pt-6">
                                                            {data.weight && <div className="flex items-center gap-3 text-[12px] font-black text-slate-500 uppercase tracking-widest"><LucideIcon name="scale" size={18}/> {data.weight}kg</div>}
                                                            {data.ringKcal && <div className="flex items-center gap-3 text-[12px] font-black text-orange-500 uppercase tracking-widest"><LucideIcon name="zap" size={18}/> RF {data.ringKcal}</div>}
                                                            {data.boxingKcal && <div className="flex items-center gap-3 text-[12px] font-black text-blue-500 uppercase tracking-widest"><LucideIcon name="zap" size={18}/> BX {data.boxingKcal}</div>}
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                        );
                                    })
                                )}
                            </div>
                        )}

                        {viewMode === 'program' && (
                            <div className="flex flex-col gap-8 animate-in slide-in-from-bottom-4 duration-500">
                                <h3 className="text-lg font-black text-cyan-400 uppercase tracking-[0.3em] px-1 flex items-center gap-3 mb-2"><LucideIcon name="layout-grid" size={28}/> Hybrid Database</h3>
                                <div className="grid grid-cols-1 gap-6">
                                    {ROUTINES.map(r => (
                                        <div key={r.id} className="glass rounded-[2.5rem] overflow-hidden shadow-2xl border-white/5 group">
                                            <div className={`bg-gradient-to-br ${r.color} p-8 flex justify-between items-center shadow-lg`}>
                                                <span className="font-black text-2xl text-white italic uppercase drop-shadow-lg tracking-tight">{r.label} - {r.name}</span>
                                                <LucideIcon name={r.id === 'rest' ? "trending-up" : r.id === 'off' ? "moon" : "flame"} size={32} className="text-white" />
                                            </div>
                                            <div className="p-8 space-y-6">
                                                <p className="text-slate-100 text-lg font-bold tracking-tight leading-snug">{r.detail}</p>
                                                <p className="text-base text-slate-400 font-medium italic opacity-90 leading-relaxed border-t border-white/5 pt-6">"{r.synergy}"</p>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                                <div className="glass rounded-[3rem] p-10 border-cyan-400/20 shadow-2xl mb-12 text-center">
                                    <h3 className="text-sm font-black text-cyan-400 uppercase tracking-widest mb-8 flex items-center justify-center gap-3"><LucideIcon name="database" size={24} /> System Management</h3>
                                    <div className="grid grid-cols-1 gap-5">
                                        <button onClick={exportData} className="flex items-center justify-center gap-4 bg-cyan-600 hover:bg-cyan-500 text-white font-black py-6 rounded-[2rem] text-lg uppercase transition-all shadow-2xl active:scale-95"><LucideIcon name="download" size={24} /> Backup Database (.json)</button>
                                        <button onClick={() => fileInputRef.current.click()} className="flex items-center justify-center gap-4 bg-white/10 hover:bg-white/20 text-white font-black py-6 rounded-[2rem] text-lg uppercase transition-all border border-white/5 shadow-2xl"><LucideIcon name="upload" size={24} /> Restore Database File</button>
                                        <input type="file" ref={fileInputRef} onChange={importData} accept=".json" className="hidden" />
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* ÌïòÎã® ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò */}
                        <div className="fixed bottom-10 left-1/2 -translate-x-1/2 w-[95%] max-w-md glass rounded-[3rem] p-2 flex gap-2 shadow-[0_40px_100px_rgba(0,0,0,0.9)] z-50 border-white/20 no-scrollbar overflow-x-auto">
                            <button onClick={() => setViewMode('calendar')} className={`flex-1 flex flex-col items-center justify-center gap-2 py-5 rounded-[2.5rem] text-[11px] font-black transition-all uppercase tracking-widest ${viewMode === 'calendar' ? 'bg-white text-slate-950 shadow-2xl scale-105' : 'text-slate-500'}`}><LucideIcon name="calendar" size={24} /> CAL</button>
                            <button onClick={() => setViewMode('memo')} className={`flex-1 flex flex-col items-center justify-center gap-2 py-5 rounded-[2.5rem] text-[11px] font-black transition-all uppercase tracking-widest ${viewMode === 'memo' ? 'bg-white text-slate-950 shadow-2xl scale-105' : 'text-slate-500'}`}><LucideIcon name="message-square" size={24} /> MEMO</button>
                            <button onClick={() => setViewMode('chart')} className={`flex-1 flex flex-col items-center justify-center gap-2 py-5 rounded-[2.5rem] text-[11px] font-black transition-all uppercase tracking-widest ${viewMode === 'chart' ? 'bg-white text-slate-950 shadow-2xl scale-105' : 'text-slate-500'}`}><LucideIcon name="trending-up" size={24} /> CHART</button>
                            <button onClick={() => setViewMode('program')} className={`flex-1 flex flex-col items-center justify-center gap-2 py-5 rounded-[2.5rem] text-[11px] font-black transition-all uppercase tracking-widest ${viewMode === 'program' ? 'bg-white text-slate-950 shadow-2xl scale-105' : 'text-slate-500'}`}><LucideIcon name="layout-grid" size={24} /> DB</button>
                        </div>
                    </div>

                    {toast && <div className="fixed bottom-36 left-1/2 -translate-x-1/2 z-[200] glass px-10 py-6 rounded-full shadow-[0_30px_60px_rgba(0,0,0,0.8)] border-cyan-400/50 animate-in fade-in slide-in-from-bottom-10 transition-all"><p className="text-lg font-black text-cyan-400 tracking-tight flex items-center gap-4"><LucideIcon name="check-circle" size={24} /> {toast}</p></div>}

                    {showNavModal && (
                        <div className="fixed inset-0 z-[100] flex items-center justify-center p-6 backdrop-blur-3xl bg-black/85 animate-in fade-in duration-300">
                            <div className="glass border-white/20 rounded-[3.5rem] p-12 w-full max-w-sm shadow-2xl">
                                <div className="flex justify-between items-center mb-10 text-cyan-400 font-black italic uppercase tracking-widest text-2xl">Warp Drive<button onClick={() => setShowNavModal(false)} className="p-3 bg-white/5 rounded-full border border-white/5"><LucideIcon name="x" size={28} /></button></div>
                                <div className="space-y-10 text-center">
                                    <select value={viewDate.getFullYear()} onChange={(e) => setViewDate(new Date(parseInt(e.target.value), viewDate.getMonth(), 1))} className="w-full bg-white/5 border border-white/10 rounded-[2rem] p-8 text-4xl text-white font-black appearance-none outline-none focus:ring-4 ring-cyan-400/20">
                                        {[2024, 2025, 2026, 2027].map(y => <option key={y} value={y} className="bg-slate-950">{y} YEAR</option>)}
                                    </select>
                                    <div className="grid grid-cols-4 gap-3">
                                        {Array.from({length: 12}).map((_, i) => (
                                            <button key={i} onClick={() => { setViewDate(new Date(viewDate.getFullYear(), i, 1)); setShowNavModal(false); }} className={`py-5 rounded-2xl text-xl font-black transition-all ${viewDate.getMonth() === i ? 'bg-cyan-500 text-white shadow-2xl' : 'bg-white/5 text-slate-500 hover:bg-white/10'}`}>{i + 1}</button>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {showHelp && (
                        <div className="fixed inset-0 z-[100] flex items-center justify-center p-6 backdrop-blur-3xl bg-black/85 animate-in fade-in duration-300">
                            <div className="glass border-white/20 rounded-[3.5rem] p-10 w-full max-w-sm shadow-2xl space-y-10">
                                <div className="flex justify-between items-center text-cyan-400 font-black italic uppercase tracking-widest text-2xl">Manual<button onClick={() => setShowHelp(false)} className="p-3 bg-white/5 rounded-full"><LucideIcon name="x" size={24} /></button></div>
                                <div className="space-y-8 text-lg leading-relaxed text-slate-300">
                                    <p><strong>1. Î™ÖÏñ∏ ÏãúÏä§ÌÖú</strong>: 365Ïùº Í≥†Ïú† Î°úÏßÅÏùÑ ÌÜµÌï¥ Îß§Ïùº ÏÉàÎ°úÏö¥ ÎèôÍ∏∞Î∂ÄÏó¨ Î¨∏Íµ¨Î•º Ï†úÍ≥µÌï©ÎãàÎã§.</p>
                                    <p><strong>2. ÌÉ≠ Ïò§Î•ò ÏàòÏ†ï</strong>: MEMOÏôÄ DB ÌÉ≠Ïùò Ï∂úÎ†• Ïò§Î•òÎ•º Ìï¥Í≤∞ÌïòÏó¨ Î™®Îì† ÌôîÎ©¥Ïù¥ Ï†ïÏÉÅ ÌëúÏãúÎê©ÎãàÎã§.</p>
                                    <p><strong>3. ÏàòÌñâ ÏÉÅÌÉú ÏÑ†ÌÉù</strong>: Î£®Ìã¥ ÏÑ†ÌÉù Ïãú <span className="text-cyan-400 font-bold">FULL, RING, BOX</span> ÏÉÅÌÉúÎ•º Ï¶âÏãú Í∏∞Î°ùÌï† Ïàò ÏûàÏäµÎãàÎã§.</p>
                                </div>
                                <button onClick={() => setShowHelp(false)} className="w-full py-6 bg-cyan-600 rounded-[2.5rem] font-black uppercase text-sm active:scale-95 transition-all shadow-2xl">I Understood</button>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>